<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WhatsApp Clone</title>

  <link rel="stylesheet" href="style.css">

  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

<body>

  <!-- Redirect to login if not logged in -->
  <script>
    if (!localStorage.getItem("username")) {
      window.location.replace("login.html");
    }
  </script>

  <div class="chat-container">

    <h2>Secure Chat (RSA + AES)</h2>

    <!-- Messages Area -->
    <div id="chatBox"></div>

    <!-- Input Section -->
    <div class="input-section">

      <input 
        type="text" 
        id="receiverInput" 
        placeholder="Enter receiver username"
      />

      <input 
        type="text" 
        id="messageInput" 
        placeholder="Type your message..." 
        autocomplete="off"
      />

      <button id="sendBtn">Send</button>
      <button onclick="backupToDrive()">Backup</button>

    </div>
  </div>

  <!-- ðŸ”¥ Load Socket.io FIRST -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

  <!-- ðŸ”¥ Load crypto BEFORE app.js -->
  <script src="js/crypto.js"></script>

  <!-- Your main app logic -->
  <script src="js/app.js"></script>

  <!-- Google Drive backup -->
  <script src="js/drive.js"></script>

  <script>
    const CLIENT_ID = "17026982031-ltdd31hn8ueajv92bqto5n52mvms9iq6.apps.googleusercontent.com";
  </script>

</body>
</html>